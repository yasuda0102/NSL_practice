// Driver for module test

#include "declaration.nsl"

declare driver simulation {

}

module driver {
    primitive_cpu cpu;
    dpram m64K;
    reg count[8] = 0;

    count++;
    if (count == 2) _finish("Simulation End");

    func cpu.write {
        m64K.addr1 = cpu.addr1;
        m64K.wdata1 = cpu.wdata;
        m64K.we1 = 0b1;
    }

    func cpu.read {
        m64K.addr2 = cpu.addr2;
        m64K.wdata2 = 0x00000000;
        m64K.we2 = 0b0;
        return m64K.rdata2;
    }
}